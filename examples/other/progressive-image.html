<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .img-div {
        height: 300px;
        background-repeat: no-repeat;
        background-size: 100% 100%;
        /* background-size: contain; */
        /* background-size: cover; */
      }
    </style>
  </head>
  <body>
    <div
      id="bg-img"
      data-src="https://w.wallhaven.cc/full/we/wallhaven-werowr.png"
      class="img-div"
      style="background-image: url(https://place.dog/300/300)"
    ></div>
    <img
      id="img"
      style="width: auto; height: 300px"
      data-src="https://w.wallhaven.cc/full/we/wallhaven-werowr.png"
      src="https://place.dog/300/200"
      alt=""
      srcset=""
    />
  </body>
  <script>
    function handleWithBg() {
      let dom = document.querySelector('#bg-img')
      let src = dom.getAttribute('data-src')
      console.log('ðŸš€ ~ main ~ src:', src)
      let img = document.createElement('img')
      img.hidden = true
      img.src = src
      img.addEventListener('load', () => {
        setTimeout(() => {
          dom.style = `background-image: url(${src})`
        }, 1000 * 2)
      })
    }

    function handleWithImg() {
      let dom = document.querySelector('#img')
      let src = dom.getAttribute('data-src')
      console.log('ðŸš€ ~ main ~ src:', src)
      let img = document.createElement('img')
      img.hidden = true
      img.src = src
      img.addEventListener('load', () => {
        setTimeout(() => {
          dom.src = src
        }, 1000 * 2)
      })
      // document.body.appendChild(img)
    }
    document.addEventListener('DOMContentLoaded', handleWithImg)
    // window.addEventListener('load', main)
  </script>
</html>
